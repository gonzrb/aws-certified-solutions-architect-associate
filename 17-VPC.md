1- What is a VPC?

- Amazon Virtual Privte Cloud (Amazon VPC) lets you provision a logically isolated section of the Amazon Web Services (AWS) Cloud where you can lanuch AWS resources in a virtual network that you define. You have complete control over your virtual networking environment, including selectrion of your own IP address range, creation of subnets, and configuration of route tables and network getaways.

- You can easily customize the network configuration for your Amazon Virtual Private Cloud. Aditionally, you can create a Hardware Private Network (VPN) connection between your corporate datacenter and your VPC and leverage the AWS cloud as an extension of your corporate datacenter.

2- What can we do with a VPC?

- Launch instances into a subnet of your choosing
- Assign custom ip address ranges ranges in each subnet
- Configure route tables between subnets
- Create internet getaway and attach it to our VPC
- Much better security control over your AWS resources
- Instance security groups
- Subnet network access control lits (ACLS)

4- Default VPC vs. Custom VPC

- Default VPC is user friendly, allowing you to inmediately deploy instances.
- All Subnets instance has both a public and private IP address.
- Each EC2 instance has both a public and private ip address.

5- VPC Peering

- Allows you to connect one VPC with another via a direct network route using private IP addresses.
- Instances behave as if they were on the same private network
- You can peer VPC's with other AWS accounts as well with other VPC's in the same account
- Peering is in a star configuration: ie 1 central VPC peers with 4 others. (No transitive peering)

- Notes
    - Think of a VPC as a logical datacenter in AWS.
    - Consists of IGWs (Or Virtual Private Getaways), Route Tables,m NEtwork Access Control Lists, Subnets, and Security Groups.
    - 1 Subnet = 1 Availability Zone.
    - Security Groups are Stateful, Network Access Control Lists are Stateless.
    - No Transitive peering

6- What is a VPC Flow log?

- VPC FLow Logs is a feature that enables you to capture information about the IP traffic going to and from network interfaces in your VPC. Flow log data is stored using Amazon ClodWatch Logs. After you have create a flow lof, you can view and retrieve its data in Amazon CloudWatch Logs.
- They can be created at three levesl
    - VPC
    - Subnet
    - NEtwork Interface Level

- You cannot enable flow logs for VPCs that are peered with your VPC unless the peer VPC is in your account
- You cannot tag a flow log
- After you have crated a flow log, you cannot change it's configuration, for example, you can't associate a different IAM role with the flow log
- Not all IP Traffict is monitored
    - Traffic generated by instances when they contact the Amazon DNS server. If you use your own DNS server, then all traffic to that DNS server is logged.
    - Traffic generated by a Windows instance for Amazon Windows licence activation
    - Traffic to and from 169.254.169.254 for instance metadata
    - DHCP trafgfict
    - Traffic to the reserved IP address for the default VPC router

7- What is a Bastion Host?

- A Bastion Host is a special purpose computer on a network specifically designed and configured to withstand attacks. The computer generally hosts a single application, for example a proxy server, and all other services are removed or limited to reduce the threat to the computer. It is hardened in this manner primarily due to its location and purpose, which is either on the outside of a firewall or in a demilitared zone (DMZ) and usually involves access from untrusted networks or computers.
- A NAT Getaway or NAT Instance is used to provide internet traffict ot EC2 instances in a private subnet.
- A BAstion is used to securely administer EC2 isntances (USing SSH or RDP). Bastions are called Jumpo Boxes in Australia.
- You cannot use a NAT Gateway as a Bastion host.

8- Endpoints

- A VPC enpoint enables you to privately connect your PVC to supported AWS services and VPC endpoint services powered by PRivateLink without requiring an internet getaway, NAT device, VPN conection, or AWS Direct Connect connection. Instances in your VPC do not require public IP addresses to communicate with resources in the service. Traffic between your VPC and the other service does not leave the Amazon network.
- Endpoints are virtual devices. They are horizontally scaled, redundant, and highly available. VPC components that allows communication between instances in your VPC and services without imposing availability risks or bandwidth constraints on your networtk traffic,

- There are two types:
    - Interface endpoint: It is an elastic network interface with a private IP address that serves as an entry point for traffic destined to a supported service.
    - Gateway endpoint: ITs's like a NAT gateway.

